import{r as l,_ as q,V as S,s as N,u as le,T as R,j as d}from"./index-YnvRihdJ.js";function b(){return b=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)({}).hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},b.apply(null,arguments)}var ce=["animating","color","hidesWhenStopped","size","style"],z=t=>l.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),Q=l.forwardRef((t,s)=>{var a=t.animating,i=a===void 0?!0:a,e=t.color,r=e===void 0?"#1976D2":e,n=t.hidesWhenStopped,o=n===void 0?!0:n,c=t.size,E=c===void 0?"small":c,_=t.style,P=q(t,ce),v=l.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},z({stroke:r,opacity:.2}),z({stroke:r,strokeDasharray:80,strokeDashoffset:60}));return l.createElement(S,b({},P,{"aria-valuemax":1,"aria-valuemin":0,ref:s,role:"progressbar",style:[D.container,_]}),l.createElement(S,{children:v,style:[typeof E=="number"?{height:E,width:E}:ue[E],D.animation,!i&&D.animationPause,!i&&o&&D.hidesWhenStopped]}))});Q.displayName="ActivityIndicator";var D=N.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),ue=N.create({small:{width:20,height:20},large:{width:36,height:36}}),H="DELAY",f="ERROR",W="LONG_PRESS_DETECTED",u="NOT_RESPONDER",g="RESPONDER_ACTIVE_LONG_PRESS_START",A="RESPONDER_ACTIVE_PRESS_START",x="RESPONDER_INACTIVE_PRESS_START",Ee="RESPONDER_GRANT",p="RESPONDER_RELEASE",Z="RESPONDER_TERMINATED",B=Object.freeze({NOT_RESPONDER:{DELAY:f,RESPONDER_GRANT:x,RESPONDER_RELEASE:f,RESPONDER_TERMINATED:f,LONG_PRESS_DETECTED:f},RESPONDER_INACTIVE_PRESS_START:{DELAY:A,RESPONDER_GRANT:f,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:f},RESPONDER_ACTIVE_PRESS_START:{DELAY:f,RESPONDER_GRANT:f,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:g},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:f,RESPONDER_GRANT:f,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:g},ERROR:{DELAY:u,RESPONDER_GRANT:x,RESPONDER_RELEASE:u,RESPONDER_TERMINATED:u,LONG_PRESS_DETECTED:u}}),ee=t=>t.getAttribute("role"),C=t=>t.tagName.toLowerCase(),F=t=>t===A||t===g,O=t=>ee(t)==="button",J=t=>t===x||t===A||t===g,de=t=>t===Z||t===p,K=t=>{var s=t.key,a=t.target,i=s===" "||s==="Spacebar",e=C(a)==="button"||O(a);return s==="Enter"||i&&e},he=450,_e=50;class fe{constructor(s){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=u,this._responderElement=null,this.configure(s)}configure(s){this._config=s}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var s=(e,r)=>{e.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=u,this._isPointerTouch=e.nativeEvent.type==="touchstart",this._receiveSignal(Ee,e);var n=L(this._config.delayPressStart,0,_e);r!==!1&&n>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(H,e)},n):this._receiveSignal(H,e);var o=L(this._config.delayLongPress,10,he);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(e)},o+n)},a=e=>{this._receiveSignal(p,e)},i=e=>{var r=this._config.onPress,n=e.target;if(this._touchState!==u&&K(e)){a(e),document.removeEventListener("keyup",i);var o=n.getAttribute("role"),c=C(n),E=o==="link"||c==="a"||c==="button"||c==="input"||c==="select"||c==="textarea",_=this._responderElement===n;r!=null&&!E&&_&&r(e),this._responderElement=null}};return{onStartShouldSetResponder:e=>{var r=this._config.disabled;return r&&O(e.currentTarget)&&e.stopPropagation(),r==null?!0:!r},onKeyDown:e=>{var r=this._config.disabled,n=e.key,o=e.target;if(!r&&K(e)){this._touchState===u&&(s(e,!1),this._responderElement=o,document.addEventListener("keyup",i));var c=n===" "||n==="Spacebar",E=ee(o),_=E==="button"||E==="menuitem";c&&_&&C(o)!=="button"&&e.preventDefault(),e.stopPropagation()}},onResponderGrant:e=>s(e),onResponderMove:e=>{this._config.onPressMove!=null&&this._config.onPressMove(e);var r=X(e);if(this._touchActivatePosition!=null){var n=this._touchActivatePosition.pageX-r.pageX,o=this._touchActivatePosition.pageY-r.pageY;Math.hypot(n,o)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:e=>a(e),onResponderTerminate:e=>{e.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(Z,e)},onResponderTerminationRequest:e=>{var r=this._config,n=r.cancelable,o=r.disabled,c=r.onLongPress;return!o&&c!=null&&this._isPointerTouch&&e.nativeEvent.type==="contextmenu"?!1:n??!0},onClick:e=>{var r=this._config,n=r.disabled,o=r.onPress;n?O(e.currentTarget)&&e.stopPropagation():(e.stopPropagation(),this._longPressDispatched||this._selectionTerminated?e.preventDefault():o!=null&&e.altKey===!1&&o(e))},onContextMenu:e=>{var r=this._config,n=r.disabled,o=r.onLongPress;n?O(e.currentTarget)&&e.stopPropagation():o!=null&&this._isPointerTouch&&!e.defaultPrevented&&(e.preventDefault(),e.stopPropagation())}}}_receiveSignal(s,a){var i=this._touchState,e=null;B[i]!=null&&(e=B[i][s]),!(this._touchState===u&&s===p)&&(e==null||e===f?console.error("PressResponder: Invalid signal "+s+" for state "+i+" on responder"):i!==e&&(this._performTransitionSideEffects(i,e,s,a),this._touchState=e))}_performTransitionSideEffects(s,a,i,e){if(de(i)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),J(s)&&i===W){var r=this._config.onLongPress;r!=null&&e.nativeEvent.key==null&&(r(e),this._longPressDispatched=!0)}var n=F(s),o=F(a);if(!n&&o?this._activate(e):n&&!o&&this._deactivate(e),J(s)&&i===p){var c=this._config,E=c.onLongPress,_=c.onPress;if(_!=null){var P=E!=null&&s===g;P||!o&&!n&&(this._activate(e),this._deactivate(e))}}this._cancelPressDelayTimeout()}_activate(s){var a=this._config,i=a.onPressChange,e=a.onPressStart,r=X(s);this._touchActivatePosition={pageX:r.pageX,pageY:r.pageY},e!=null&&e(s),i!=null&&i(!0)}_deactivate(s){var a=this._config,i=a.onPressChange,e=a.onPressEnd;function r(){e!=null&&e(s),i!=null&&i(!1)}var n=L(this._config.delayPressEnd);n>0?this._pressOutDelayTimeout=setTimeout(()=>{r()},n):r()}_handleLongPress(s){(this._touchState===A||this._touchState===g)&&this._receiveSignal(W,s)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function L(t,s,a){return s===void 0&&(s=0),a===void 0&&(a=0),Math.max(s,t??a)}function X(t){var s=t.nativeEvent,a=s.changedTouches,i=s.touches;return i!=null&&i.length>0?i[0]:a!=null&&a.length>0?a[0]:t.nativeEvent}function Pe(t,s){var a=l.useRef(null);a.current==null&&(a.current=new fe(s));var i=a.current;return l.useEffect(()=>{i.configure(s)},[s,i]),l.useEffect(()=>()=>{i.reset()},[i]),l.useDebugValue(s),i.getEventHandlers()}var Re=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function ge(t,s){var a=t.activeOpacity,i=t.delayPressIn,e=t.delayPressOut,r=t.delayLongPress,n=t.disabled,o=t.focusable,c=t.onLongPress,E=t.onPress,_=t.onPressIn,P=t.onPressOut,v=t.rejectResponderTermination,se=t.style,ie=q(t,Re),j=l.useRef(null),ae=le(s,j),k=l.useState("0s"),re=k[0],G=k[1],M=l.useState(null),w=M[0],V=M[1],T=l.useCallback((h,y)=>{V(h),G(y?y/1e3+"s":"0s")},[V,G]),Y=l.useCallback(h=>{T(a??.2,h)},[a,T]),$=l.useCallback(h=>{T(null,h)},[T]),ne=l.useMemo(()=>({cancelable:!v,disabled:n,delayLongPress:r,delayPressStart:i,delayPressEnd:e,onLongPress:c,onPress:E,onPressStart(h){var y=h.dispatchConfig!=null?h.dispatchConfig.registrationName==="onResponderGrant":h.type==="keydown";Y(y?0:150),_!=null&&_(h)},onPressEnd(h){$(250),P!=null&&P(h)}}),[r,i,e,n,c,E,_,P,v,Y,$]),oe=Pe(j,ne);return l.createElement(S,b({},ie,oe,{accessibilityDisabled:n,focusable:!n&&o!==!1,pointerEvents:n?"box-none":void 0,ref:ae,style:[U.root,!n&&U.actionable,se,w!=null&&{opacity:w},{transitionDuration:re}]}))}var U=N.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),te=l.memo(l.forwardRef(ge));te.displayName="TouchableOpacity";var I=l.forwardRef((t,s)=>{var a=t.accessibilityLabel,i=t.color,e=t.disabled,r=t.onPress,n=t.testID,o=t.title;return l.createElement(te,{accessibilityLabel:a,accessibilityRole:"button",disabled:e,focusable:!e,onPress:r,ref:s,style:[m.button,i&&{backgroundColor:i},e&&m.buttonDisabled],testID:n},l.createElement(R,{style:[m.text,e&&m.textDisabled]},o))});I.displayName="Button";var m=N.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const ve=()=>{const[t,s]=l.useState(null),[a,i]=l.useState(!1),[e,r]=l.useState(!1),n=async()=>{i(!0),r(!1);try{const c=await(await fetch("https://v2.jokeapi.dev/joke/Any?safe-mode")).json();s(c)}catch{r(!0)}finally{i(!1)}};return l.useEffect(()=>{n()},[]),a?d.jsx(Q,{size:"large",color:"#0000ff"}):e?d.jsxs(S,{style:{justifyContent:"center",alignItems:"center",padding:20},children:[d.jsx(R,{style:{color:"red",marginBottom:20},children:"Failed to fetch the joke. Please try again."}),d.jsx(I,{title:"Retry",onPress:n})]}):d.jsxs(S,{style:{flex:1,justifyContent:"center",alignItems:"center",padding:20},children:[t?t.type==="single"?d.jsx(R,{style:{fontSize:18,textAlign:"center",marginBottom:20},children:t.joke}):d.jsxs(d.Fragment,{children:[d.jsx(R,{style:{fontSize:18,textAlign:"center",marginBottom:10},children:t.setup}),d.jsx("hr",{style:{width:"100%",margin:"10px 0"}}),d.jsx(R,{style:{fontSize:18,textAlign:"center",fontWeight:"bold"},children:t.delivery})]}):d.jsx(R,{children:"No joke available."}),d.jsx(I,{title:"Get Another Joke",onPress:n})]})};export{ve as default};
