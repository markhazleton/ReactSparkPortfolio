import{r as p,R as b,P as h,u as F,j as e,G as _}from"./index-SKmXoiLC.js";import{A as k}from"./arrow-clockwise-DMkli_Zl.js";import{S as B}from"./search-CsUTBgux.js";import{A as J}from"./arrow-right-circle-BNfV83Mh.js";var G=["color","size","title","className"];function P(){return P=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},P.apply(null,arguments)}function V(t,o){if(t==null)return{};var s,r,c=Z(t,o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)s=l[r],o.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(c[s]=t[s])}return c}function Z(t,o){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(o.indexOf(r)!==-1)continue;s[r]=t[r]}return s}var L=p.forwardRef(function(t,o){var s=t.color,r=s===void 0?"currentColor":s,c=t.size,l=c===void 0?"1em":c,g=t.title,d=g===void 0?null:g,m=t.className,a=m===void 0?"":m,u=V(t,G);return b.createElement("svg",P({ref:o,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:l,height:l,fill:r,className:["bi","bi-chevron-left",a].filter(Boolean).join(" ")},u),d?b.createElement("title",null,d):null,b.createElement("path",{fillRule:"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"}))});L.propTypes={color:h.string,size:h.oneOfType([h.string,h.number]),title:h.string,className:h.string};var K=["color","size","title","className"];function S(){return S=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},S.apply(null,arguments)}function q(t,o){if(t==null)return{};var s,r,c=H(t,o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(r=0;r<l.length;r++)s=l[r],o.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(c[s]=t[s])}return c}function H(t,o){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(o.indexOf(r)!==-1)continue;s[r]=t[r]}return s}var T=p.forwardRef(function(t,o){var s=t.color,r=s===void 0?"currentColor":s,c=t.size,l=c===void 0?"1em":c,g=t.title,d=g===void 0?null:g,m=t.className,a=m===void 0?"":m,u=q(t,K);return b.createElement("svg",S({ref:o,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:l,height:l,fill:r,className:["bi","bi-chevron-right",a].filter(Boolean).join(" ")},u),d?b.createElement("title",null,d):null,b.createElement("path",{fillRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"}))});T.propTypes={color:h.string,size:h.oneOfType([h.string,h.number]),title:h.string,className:h.string};const z=t=>t,A=[{id:1,image:"https://markhazleton.com/assets/img/frogsfolly.png",p:"Frogsfolly",d:" My first website, setup to share photos with my family but is now a 'Kitchen Sink' of demos and test ideas. The site is built with  Web Project Mechanics CMS.",h:"https://frogsfolly.com"},{id:2,image:"https://markhazleton.com/assets/img/travelfrogsfolly.png",p:"Travel Frogsfolly",d:"A website with places we have traveld with a few pictures and descriptions of the highlights. The site is built with  Web Project Mechanics CMS",h:"https://travel.frogsfolly.com"},{id:3,image:"https://markhazleton.com/assets/img/jmshawminerals.jpg",p:"JM Shaw Minerals",d:"A website for a collector of fine gemstones.  Uses Web Project Mechanics CMS and some custom code for tracking each item in the collection.",h:"https://jmshawminerals.com"},{id:4,image:"https://markhazleton.com/assets/img/controlorigins.jpg",p:"Control Origins",d:"At Control Origins, our mission is to empower organizations with innovative technology solutions that drive value creation and enable them to achieve their business goals. ",h:"https://controlorigins.com"},{id:5,image:"https://markhazleton.com/assets/img/pmcontrolorigins.png",p:"Project Mechanics",d:"A resource sharing insights and strategies on effective project management and IT service delivery.",h:"https://markhazleton.com/projectmechanics/"},{id:6,image:"https://markhazleton.com/assets/img/dataanalysiscontrolorigins.png",p:"Data Analysis Demo",d:"A demo web application of what you can do with the .Net Framework and CSV files for data analysis.",h:"https://dataanalysisdemo.markhazleton.com"},{id:7,image:"https://markhazleton.com/assets/img/employeemvccrudcontrolorigins.png",p:"Net 8 Sample MVC CRUD",d:"A project to try out new approaches and technologies.  This started in Active Server Pages (ASP) but has evolved to use some of the latest features of AspNet version 8. The project is on Github.",h:"https://samplecrud.markhazleton.com/"},{id:8,image:"https://markhazleton.com/assets/img/asyncwebsamplecontrolorigins.png",p:"Net 7 Async Demo",d:"A demonstration of Asyc methods for Api and Web pages. Includes integration with Open Weather. Source is on Github github.com/markhazleton/webspark ",h:"https://webspark.markhazleton.com/asyncspark"},{id:9,image:"https://markhazleton.com/assets/img/mechanicsofmotherhood.png",p:"Mechanics Of Motherhood",d:"A blog for my wife to share her recipies, thoughts and experiences as a mother.  Uses ControlSpark CMS a custom CMS I wrote in Net 8.",h:"https://mechanicsofmotherhood.com/"},{id:10,image:"https://markhazleton.com/assets/img/promptspark.png",p:"PromptSpark",d:"A LLM prompt management and comparison tool. Prompt Spark helps developers and businesses optimize the use of LLM models by managing, tracking, and comparing system prompts efficiently. ",h:"https://webspark.markhazleton.com/promptspark"}],Q=async()=>{const t=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",o=t?"/api/projects":"/api/proxy-projects";try{let s,r;const c=localStorage.getItem("cachedProjectsData"),l=localStorage.getItem("projectsLastUpdated"),g=l?Date.now()-new Date(l).getTime():1/0,d=t?1e3*60*5:1e3*60*60;if(c&&g<d){console.log("Using fresh cached Projects data");const a=JSON.parse(c);return console.log(`Successfully loaded ${a.length} projects from cached data`),a}try{console.log("Attempting to fetch Projects directly from source...");const a=new AbortController,u=setTimeout(()=>a.abort(),5e3),f=await fetch(o,{headers:{Accept:"application/json, */*","Cache-Control":"no-cache"},mode:"cors",signal:a.signal});if(clearTimeout(u),!f.ok)throw console.error(`Direct fetch failed: ${f.status} ${f.statusText}`),new Error(`Failed to fetch Projects: ${f.status} ${f.statusText}`);s=await f.json(),r="remote",console.log("Successfully fetched Projects data from remote source")}catch(a){console.warn("Direct fetch failed, checking cache:",a),c?(console.log("Using cached Projects data from localStorage (potentially stale)"),s=JSON.parse(c),r="cache"):(console.warn("No cache available, using local file"),console.log("Using embedded local projects data"),s=A,r="local file",console.log("Successfully loaded Projects data from local file"))}if(!Array.isArray(s))throw console.error("Projects data is not an array:",s),new Error("Invalid projects data format");const m=s.filter(a=>{if(typeof a.id=="number"&&typeof a.image=="string"&&typeof a.p=="string"&&typeof a.d=="string"&&typeof a.h=="string"){if(a.image&&!a.image.startsWith("http")){const u=a.image.startsWith("/")?a.image.substring(1):a.image;a.image=z(`https://markhazleton.com/${u}`)}else a.image&&a.image.startsWith("http")&&(a.image=z(a.image));return!0}else return console.warn("Invalid project data structure:",a),!1});if(console.log(`Successfully validated ${m.length} projects from ${r}`),r==="remote")try{localStorage.setItem("cachedProjectsData",JSON.stringify(m)),localStorage.setItem("projectsLastUpdated",new Date().toISOString()),localStorage.setItem("projectsCount",m.length.toString()),localStorage.setItem("projectsSource",r)}catch(a){console.warn("Failed to cache Projects data:",a)}return m}catch(s){return console.error("All Projects fetching methods failed:",s),console.log("Using final fallback to embedded local projects data"),A}},X=()=>{try{localStorage.removeItem("cachedProjectsData"),localStorage.removeItem("projectsLastUpdated"),localStorage.removeItem("projectsCount"),localStorage.removeItem("projectsSource"),console.log("Projects cache cleared successfully")}catch(t){console.warn("Failed to clear projects cache:",t)}},I=()=>{const t=localStorage.getItem("projectsLastUpdated"),o=localStorage.getItem("projectsCount"),s=localStorage.getItem("projectsSource");return{lastUpdated:t?new Date(t):null,count:o?parseInt(o,10):0,source:s||"unknown",hasCache:!!localStorage.getItem("cachedProjectsData")}};class C{id;image;p;d;h;constructor(o,s,r,c,l){this.id=o,this.image=s,this.p=r,this.d=c,this.h=l}static async loadProjects(){try{const o=await Q();return!o||o.length===0?(console.warn("Projects data is empty or not available."),[]):o.map(s=>new C(s.id,s.image,s.p,s.d,s.h))}catch(o){return console.error("Error loading projects:",o),[]}}formatTitle(){return this.p.trim()!==""?this.p:"Untitled Project"}formatDescription(){return this.d.trim()!==""?this.d:"No description available."}formatLink(){return this.h.trim()!==""?this.h:"#"}}function re(){const{theme:t}=F(),[o,s]=p.useState([]),[r,c]=p.useState(!0),[l,g]=p.useState(null),[d,m]=p.useState(""),[a,u]=p.useState(1),f=6,[$,M]=p.useState("id-desc"),[y,D]=p.useState(I()),v=async(n=!1)=>{c(!0),g(null);try{n&&(X(),console.log("Cache cleared, fetching fresh data..."));const i=await C.loadProjects();s(i),D(I()),i.length===0&&g("No projects available at the moment.")}catch(i){console.error("Error loading projects:",i),g("Failed to load projects. Please try again later.")}finally{c(!1)}};p.useEffect(()=>{v()},[]),p.useEffect(()=>{u(1)},[d]);const x=[...o.filter(n=>d===""||n.p.toLowerCase().includes(d.toLowerCase())||n.d.toLowerCase().includes(d.toLowerCase()))].sort((n,i)=>{switch($){case"name-asc":return n.p.localeCompare(i.p);case"name-desc":return i.p.localeCompare(n.p);case"id-asc":return n.id-i.id;case"id-desc":return i.id-n.id;default:return 0}}),w=a*f,O=w-f,E=x.slice(O,w),j=Math.ceil(x.length/f),N=n=>{u(n),window.scrollTo({top:document.getElementById("projects-section")?.offsetTop||0,behavior:"smooth"})},U=n=>{M(n)},R=()=>{if(j<=1)return null;const n=[];n.push(e.jsx("li",{className:`page-item ${a===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>N(a-1),disabled:a===1,"aria-label":"Previous page",children:e.jsx(L,{size:16})})},"prev"));for(let i=1;i<=j;i++)i===1||i===j||i>=a-1&&i<=a+1?n.push(e.jsx("li",{className:`page-item ${a===i?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>N(i),children:i})},i)):(i===a-2&&a>3||i===a+2&&a<j-2)&&n.push(e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${i}`));return n.push(e.jsx("li",{className:`page-item ${a===j?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>N(a+1),disabled:a===j,"aria-label":"Next page",children:e.jsx(T,{size:16})})},"next")),e.jsx("nav",{"aria-label":"Projects pagination",className:"mt-4",children:e.jsx("ul",{className:"pagination justify-content-center",children:n})})},W=()=>{v(!0)};return r?e.jsx("section",{className:"py-5",id:"projects-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-center mb-5",children:"My Projects"}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]})}):l?e.jsx("section",{className:"py-5",id:"projects-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-center mb-5",children:"My Projects"}),e.jsxs("div",{className:`alert ${t==="dark"?"alert-dark":"alert-danger"} text-center`,children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),l,e.jsx("br",{}),e.jsxs("button",{className:`btn btn-sm ${t==="dark"?"btn-outline-light":"btn-outline-primary"} mt-2`,onClick:()=>v(!0),children:[e.jsx(k,{className:"me-1"})," Try Again"]})]})]})}):o.length===0?e.jsx("section",{className:"py-5",id:"projects-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-center mb-5",children:"My Projects"}),e.jsxs("div",{className:`alert ${t==="dark"?"alert-dark":"alert-info"}`,children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"No projects available at the moment.",e.jsxs("button",{className:`btn btn-sm ${t==="dark"?"btn-outline-light":"btn-outline-primary"} ms-2`,onClick:()=>v(!0),children:[e.jsx(k,{className:"me-1"})," Refresh"]})]})]})}):e.jsx("section",{className:"py-5",id:"projects-section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-5",children:[e.jsx("h2",{className:"mb-0",children:"My Projects"}),e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[y.hasCache&&e.jsxs("small",{className:"text-muted",children:["Last updated: ",y.lastUpdated?.toLocaleString(),"(",y.source,")"]}),e.jsxs("button",{className:`btn btn-sm ${t==="dark"?"btn-outline-light":"btn-outline-primary"}`,onClick:W,title:"Refresh projects from server",children:[e.jsx(k,{className:"me-1"})," Refresh"]})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-8 mb-3 mb-md-0",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:`input-group-text ${t==="dark"?"bg-dark text-light border-secondary":"bg-light"}`,children:e.jsx(B,{})}),e.jsx("input",{type:"text",className:`form-control ${t==="dark"?"bg-dark text-light border-secondary":""}`,placeholder:"Search projects...",value:d,onChange:n=>m(n.target.value)})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("select",{className:`form-select ${t==="dark"?"bg-dark text-light border-secondary":""}`,value:$,onChange:n=>U(n.target.value),"aria-label":"Sort projects",children:[e.jsx("option",{value:"id-desc",children:"Newest First"}),e.jsx("option",{value:"id-asc",children:"Oldest First"}),e.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Name (Z-A)"})]})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("small",{className:"text-body-secondary",children:["Showing ",O+1,"-",Math.min(w,x.length)," of ",x.length," projects"]}),j>1&&e.jsxs("small",{className:"text-body-secondary",children:["Page ",a," of ",j]})]}),e.jsx("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4",children:E.map(n=>e.jsx("div",{className:"col",children:e.jsxs("div",{className:`card h-100 shadow-sm hover-shadow transition ${t==="dark"?"bg-dark text-light border-secondary":""}`,children:[e.jsx("img",{src:n.image,className:"card-img-top img-project",alt:n.formatTitle()}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:n.formatTitle()}),e.jsx("p",{className:`card-text small ${t==="dark"?"text-light-emphasis":"text-body-secondary"}`,children:n.formatDescription()})]}),e.jsxs("div",{className:`card-footer border-top-0 d-flex justify-content-between ${t==="dark"?"bg-dark":"bg-white"}`,children:[e.jsxs("a",{href:n.formatLink(),className:`btn btn-sm ${t==="dark"?"btn-outline-light":"btn-outline-primary"} d-flex align-items-center`,target:"_blank",rel:"noopener noreferrer",children:["Visit Site ",e.jsx(J,{className:"ms-1"})]}),n.formatLink().includes("github.com")&&e.jsxs("a",{href:n.formatLink(),className:`btn btn-sm ${t==="dark"?"btn-outline-light":"btn-outline-dark"} d-flex align-items-center`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(_,{className:"me-1"})," Code"]})]})]})},n.id))}),R(),x.length===0&&e.jsxs("div",{className:`alert ${t==="dark"?"alert-dark":"alert-warning"} mt-4`,children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"No projects match your search criteria. Try different terms."]})]})})}export{re as default};
