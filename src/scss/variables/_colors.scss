//
// Colors
//
// Pre-state grayscale colors used in other variables
$gray-800: #3c4043; // Updated to a neutral dark gray

// Override Bootstrap color system

$orange: #e0a458; // Warmer, less saturated orange

// Override Bootstrap default state colors

$primary: #4f6d7a; // Muted teal-blue
$secondary: #6c757d;
$success: #57886c; // Muted forest green
$info: #7a9eb1; // Muted blue
$warning: #e0a458; // Warmer orange
$danger: #b05f6d; // Muted red

// Custom color palette for light and dark modes
$white: #ffffff;

$theme-colors: (
  "light":      #e8d9be,
  "dark":       #0e0c08,
  "primary":    #5c3404,
  "secondary":  #8e6139,
  "info":       #c29748,
  "accent1":    #843f1a,
  "accent2":    #a45e41,
  "accent3":    #d2b18e,
  "success":    #52a409,
  "warning":    #ffbf56,
  "danger":     #f10460,
);

// Define the light theme map
$light-theme: (
  "background": map-get($theme-colors, "light"),    // light background
  "text":       map-get($theme-colors, "dark"),     // dark text for readability
  "primary":    map-get($theme-colors, "primary"),
  "secondary":  map-get($theme-colors, "secondary"),
  "info":       map-get($theme-colors, "info"),
  "accent1":    map-get($theme-colors, "accent1"),
  "accent2":    map-get($theme-colors, "accent2"),
  "accent3":    map-get($theme-colors, "accent3"),
  "success":    map-get($theme-colors, "success"),
  "warning":    map-get($theme-colors, "warning"),
  "danger":     map-get($theme-colors, "danger")
);

// Define the dark theme map
$dark-theme: (
  "background": map-get($theme-colors, "dark"),     // dark background
  "text":       $white,                             // light text using $white
  "primary":    map-get($theme-colors, "primary"),
  "secondary":  map-get($theme-colors, "secondary"),
  "info":       map-get($theme-colors, "info"),
  "accent1":    map-get($theme-colors, "accent1"),
  "accent2":    map-get($theme-colors, "accent2"),
  "accent3":    map-get($theme-colors, "accent3"),
  "success":    map-get($theme-colors, "success"),
  "warning":    map-get($theme-colors, "warning"),
  "danger":     map-get($theme-colors, "danger")
);



// Theme switching functions
@function theme-color($key) {
  @if (lightness(map-get($light-theme, 'background')) > 50) {
    // light mode
    @return map-get($light-theme, $key);
  } @else {
    // dark mode
    @return map-get($dark-theme, $key);
  }
}

// Mixins for applying theme colors
@mixin theme-aware($property, $key) {
  #{$property}: map-get($light-theme, $key);
  
  [data-bs-theme="dark"] & {
    #{$property}: map-get($dark-theme, $key);
  }
}

// CSS variable definitions for theme colors
:root {
  // Base Bootstrap colors as CSS variables
  --bs-primary: #{$primary};
  --bs-secondary: #{$secondary};
  --bs-success: #{$success};
  --bs-info: #{$info};
  --bs-warning: #{$warning};
  --bs-danger: #{$danger};
  
  // Light theme variables
  @each $name, $color in $light-theme {
    --color-#{$name}: #{$color};
  }
}

// Set dark theme variables when dark mode is active
[data-bs-theme="dark"] {
  @each $name, $color in $dark-theme {
    --color-#{$name}: #{$color};
  }
}

// Utility classes for using the custom palette
.bg-theme {
  @include theme-aware(background-color, 'background');
}

.bg-theme-alt {
  @include theme-aware(background-color, 'background-alt');
}

.text-theme {
  @include theme-aware(color, 'foreground');
}

.text-theme-alt {
  @include theme-aware(color, 'foreground-alt');
}

.text-theme-muted {
  @include theme-aware(color, 'foreground-muted');
}

.border-theme {
  @include theme-aware(border-color, 'border');
}

.border-theme-light {
  @include theme-aware(border-color, 'border-light');
}

.bg-card {
  @include theme-aware(background-color, 'card-bg');
}

.accent-color {
  @include theme-aware(color, 'accent');
}

.accent-bg {
  @include theme-aware(background-color, 'accent');
}
