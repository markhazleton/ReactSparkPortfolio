@use "../variables/colors" as colors;
@use "../variables/spacing" as spacing;

// Custom utility classes to enhance Bootstrap

// Text styling
.text-truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2; // Modern standard property
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .text-truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3; // Modern standard property
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

// Text shadow effects
.text-shadow {
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  letter-spacing: 0.5px;
}

.text-shadow-sm {
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
  letter-spacing: 0.2px;
}

.text-shadow-lg {
  text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
  letter-spacing: 0.7px;
}

// Category navigation styling with theme awareness
.category-active {
  color: #ffffff !important;
  font-weight: 600 !important;
}

.category-inactive {
  font-weight: 400 !important;
}

.category-active-dark {
  background: linear-gradient(135deg, var(--bs-primary) 0%, #344955 100%) !important;
  border: 1px solid #3a4046 !important;
  text-shadow: 0px 0px 1px rgba(0,0,0,0.5) !important;
}

// Hover effects with performance optimization
.hover-lift {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    will-change: transform, box-shadow; // Performance hint
  }
  
  .hover-lift:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
  }
  
  .hover-grow {
    transition: transform 0.3s ease;
    will-change: transform;
  }
  
  .hover-grow:hover {
    transform: scale(1.05);
  }
  
  .hover-opacity {
    transition: opacity 0.3s ease;
    will-change: opacity;
  }
  
  .hover-opacity:hover {
    opacity: 0.8;
  }
  
  // Border utilities with logical properties
  .border-dashed {
    border-style: dashed !important;
  }
  
  .border-top-dashed,
  .border-block-start-dashed {
    border-top-style: dashed !important;
    border-block-start-style: dashed !important;
  }
  
  .border-bottom-dashed,
  .border-block-end-dashed {
    border-bottom-style: dashed !important;
    border-block-end-style: dashed !important;
  }
  
  // Background patterns with CSS custom properties
  .bg-pattern-dots {
    background-image: radial-gradient(var(--pattern-dot-color, rgba(0, 0, 0, 0.1)) 1px, transparent 1px);
    background-size: var(--pattern-dot-size, 20px) var(--pattern-dot-size, 20px);
  }
  
  .bg-pattern-lines {
    background-image: linear-gradient(var(--pattern-line-color, rgba(0, 0, 0, 0.05)) 1px, transparent 1px);
    background-size: 100% var(--pattern-line-size, 20px);
  }
  
  // Gradient backgrounds using CSS custom properties
  .bg-gradient-primary {
    background: linear-gradient(135deg, var(--bs-primary), var(--bs-primary-dark, #0056b3));
  }
  
  .bg-gradient-secondary {
    background: linear-gradient(135deg, var(--bs-secondary), var(--bs-secondary-dark, #424649));
  }
  
  .bg-gradient-success {
    background: linear-gradient(135deg, var(--bs-success), var(--bs-success-dark, #146c43));
  }
  
  .bg-gradient-info {
    background: linear-gradient(135deg, var(--bs-info), var(--bs-info-dark, #087990));
  }
  
  // Shadow utilities with CSS custom properties
  .shadow-hover {
    transition: box-shadow var(--transition-duration, 0.3s) ease;
  }
  
  .shadow-hover:hover {
    box-shadow: var(--shadow-hover, 0 0.5rem 1rem rgba(0, 0, 0, 0.15)) !important;
  }
  
  .shadow-sm-hover {
    transition: box-shadow var(--transition-duration, 0.3s) ease;
  }
  
  .shadow-sm-hover:hover {
    box-shadow: var(--shadow-sm-hover, 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075)) !important;
  }
  
  // Card utilities with enhanced accessibility
  .card-hover {
    transition: all var(--transition-duration, 0.3s) ease;
    cursor: pointer;
    
    &:focus-visible {
      outline: 2px solid var(--bs-primary);
      outline-offset: 2px;
    }
  }
  
  .card-hover:hover {
    transform: translateY(-5px);
    box-shadow: var(--card-hover-shadow, 0 0.5rem 1rem rgba(0, 0, 0, 0.15)) !important;
  }
  
  // Image utilities with performance optimization
  .img-grayscale {
    filter: grayscale(100%);
    transition: filter var(--transition-duration, 0.3s) ease;
  }
  
  .img-grayscale:hover {
    filter: grayscale(0%);
  }
  
  // Text highlight with theme support
  .highlight {
    background: linear-gradient(180deg, rgba(255,255,255,0) 65%, var(--highlight-color, rgba(255, 220, 0, 0.6)) 65%);
    display: inline;
  }
  
  .highlight-primary {
    background: linear-gradient(180deg, rgba(255,255,255,0) 65%, var(--highlight-primary, rgba(var(--bs-primary-rgb), 0.2)) 65%);
    display: inline;
  }
  
  // Animation utilities with customizable timing
  .animate-fade-in {
    animation: fadeIn var(--animation-duration, 0.5s) var(--animation-timing, ease-in-out);
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .animate-slide-up {
    animation: slideUp var(--animation-duration, 0.5s) var(--animation-timing, ease-in-out);
  }
  
  @keyframes slideUp {
    from { 
      transform: translateY(var(--slide-distance, 20px)); 
      opacity: 0; 
    }
    to { 
      transform: translateY(0); 
      opacity: 1; 
    }
  }
  
  .animate-slide-left {
    animation: slideLeft var(--animation-duration, 0.5s) var(--animation-timing, ease-in-out);
  }
  
  @keyframes slideLeft {
    from { 
      transform: translateX(var(--slide-distance, 20px)); 
      opacity: 0; 
    }
    to { 
      transform: translateX(0); 
      opacity: 1; 
    }
  }
  
  // Icon styles with flexible sizing
  .icon-circle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--icon-size, 32px);
    height: var(--icon-size, 32px);
    border-radius: 50%;
    background-color: var(--bs-light);
    overflow: hidden; // Ensure content stays within bounds
    
    img {
      width: 100%;
      height: 100%;
      object-fit: contain; // Maintain aspect ratio
    }
  }
  
  .icon-circle-primary {
    background-color: var(--bs-primary);
    color: white;
  }
  
  // Navbar logo specific sizing (smaller for nav)
  .icon-circle-xs {
    --icon-size: 20px;
  }
  
  .icon-circle-sm {
    --icon-size: 24px;
  }
  
  .icon-circle-md {
    --icon-size: 32px;
  }
  
  .icon-circle-lg {
    --icon-size: 40px;
  }
  
  // Badge utilities with improved contrast
  .badge-outline-primary {
    color: var(--bs-primary);
    border: 1px solid var(--bs-primary);
    background-color: transparent;
    
    &:hover {
      background-color: var(--bs-primary);
      color: var(--bs-white, white);
    }
  }
  
  .badge-outline-secondary {
    color: var(--bs-secondary);
    border: 1px solid var(--bs-secondary);
    background-color: transparent;
    
    &:hover {
      background-color: var(--bs-secondary);
      color: var(--bs-white, white);
    }
  }
  
  // Cursor styles
  .cursor-pointer {
    cursor: pointer;
  }
  
  // Scrollbar styling with theme support
  ::-webkit-scrollbar {
    width: var(--scrollbar-width, 8px);
    height: var(--scrollbar-height, 8px);
  }
  
  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track, #f1f1f1);
    border-radius: var(--scrollbar-radius, 10px);
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb, #c1c1c1);
    border-radius: var(--scrollbar-radius, 10px);
    
    &:hover {
      background: var(--scrollbar-thumb-hover, #a8a8a8);
    }
  }
  
  // Responsive utilities using spacing variables
  .h-md-100 {
    height: 100% !important;
  }
  
  @media (max-width: 767.98px) {
    .h-md-100 {
      height: auto !important;
    }
  }
  
  // Breakpoint-specific visibility
  .visible-xs {
    display: none;
  }
  
  @media (max-width: 575.98px) {
    .visible-xs {
      display: block;
    }
  }
  
  // Enhanced accessibility utilities
  .focus-visible:focus-visible {
    outline: 2px solid var(--focus-color, var(--bs-primary));
    outline-offset: 2px;
  }
  
  // Additional spacing utilities using spacing variables
  .mt-6 {
    margin-top: spacing.$navbar-base-height + 0.625rem !important; // 4rem equivalent
  }
  
  .mb-6 {
    margin-bottom: spacing.$navbar-base-height + 0.625rem !important;
  }
  
  .pt-6 {
    padding-top: spacing.$navbar-base-height + 0.625rem !important;
  }
  
  .pb-6 {
    padding-bottom: spacing.$navbar-base-height + 0.625rem !important;
  }
  
  // Z-index utilities (consolidated to avoid duplication)
  .z-index-1,
  .z-1 {
    z-index: 1 !important;
  }
  
  .z-index-2,
  .z-2 {
    z-index: 2 !important;
  }
  
  .z-index-3,
  .z-3 {
    z-index: 3 !important;
  }

  // Custom width utilities with logical properties
  .w-30 {
    width: 30% !important;
    inline-size: 30% !important;
  }
  
  .w-40 {
    width: 40% !important;
    inline-size: 40% !important;
  }
  
  .w-60 {
    width: 60% !important;
    inline-size: 60% !important;
  }
  
  .w-70 {
    width: 70% !important;
    inline-size: 70% !important;
  }
  
  // Custom opacity classes
  .opacity-85 {
    opacity: 0.85 !important;
  }
  
  .opacity-90 {
    opacity: 0.90 !important;
  }

// Component-specific styles
// Image styles with responsive behavior
.img-project {
  height: 180px;
  object-fit: cover;
  
  @media (max-width: 768px) {
    height: 150px;
  }
}

// Map containers with consistent sizing
.map-container {
  height: 250px;
  
  @media (max-width: 768px) {
    height: 200px;
  }
}

.map-leaflet {
  height: 300px;
  width: 100%;
  
  @media (max-width: 768px) {
    height: 250px;
  }
}

// Layout utilities
.max-width-70 {
  max-width: 70%;
  
  @media (max-width: 768px) {
    max-width: 90%;
  }
}

// Modal styling
.modal-tall {
  height: 80vh;
  overflow: hidden;
  
  @media (max-width: 768px) {
    height: 90vh;
  }
  
  .modal-body {
    height: calc(80vh - 120px); // Account for header and padding
    overflow: hidden;
    
    @media (max-width: 768px) {
      height: calc(90vh - 120px);
    }
  }
  
  .chat-messages-container {
    max-height: calc(80vh - 200px) !important; // Override the default calculation
    
    @media (max-width: 768px) {
      max-height: calc(90vh - 200px) !important;
    }
  }
}

// Background overlays with theme support
.bg-overlay {
  background: var(--overlay-light, rgba(0, 0, 0, 0.15));
  z-index: 1;
}

.bg-overlay-dark {
  background: var(--overlay-dark, rgba(0, 0, 0, 0.3));
  z-index: 1;
}

.bg-overlay-light {
  background: var(--overlay-light-alt, rgba(255, 255, 255, 0.15));
  z-index: 1;
}

// Theme-aware utility class example
.utility-class {
  @include colors.theme-aware(background-color, 'background');
}